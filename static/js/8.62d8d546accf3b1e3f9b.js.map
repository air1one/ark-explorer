{"version":3,"sources":["webpack:///./src/services/wallet.js","webpack:///./src/pages/Wallet/Blocks.vue?0730","webpack:///./src/pages/Wallet/Blocks.vue?65d1","webpack:///src/pages/Wallet/Blocks.vue","webpack:///./src/pages/Wallet/Blocks.vue"],"names":["WalletService","address","_services_node__WEBPACK_IMPORTED_MODULE_4__","a","get","params","response","data","account","delegate","delegates","t","abrupt","stop","this","e","apply","arguments","key","value","c","r","mark","n","page","limit","wrap","prev","next","offset","orderBy","accounts","__webpack_exports__","s","u","o","Wallet_Blocksvue_type_script_lang_js","totalBlocks","blocks","created","_this","$on","changePage","getTotalBlocks","beforeRouteEnter","to","from","_this2","asyncToGenerator_default","regenerator_default","_callee","wallet","_context","services_wallet","find","sent","block","getByPublicKey","publicKey","vm","setBlocks","t0","catch","name","beforeRouteUpdate","_this3","_callee2","_context2","computed","$route","methods","_this4","_callee3","_context3","forgedByPublicKeyCount","Number","$router","push","component","Object","componentNormalizer","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","$t","attrs","start","count","_e","default"],"mappings":"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","file":"static/js/8.62d8d546accf3b1e3f9b.js","sourcesContent":["import NodeService from '@/services/node'\r\n\r\nclass WalletService {\r\n  async find(address) {\r\n    const response = await NodeService.get('accounts', {\r\n      params: {address}\r\n    })\r\n    return response.data.account\r\n  }\r\n\r\n  async vote(address) {\r\n    const response = await NodeService.get('accounts/delegates', {\r\n      params: {\r\n        address\r\n      }\r\n    })\r\n\r\n    const delegate = response.data.delegates[0]\r\n\r\n    return delegate || false\r\n  }\r\n\r\n  async top(page = 1, limit = 25) {\r\n    const offset = page > 1 ? (page - 1) * limit : 0\r\n\r\n    const response = await NodeService.get('accounts/top', {\r\n      params: {\r\n        orderBy: 'balance:desc',\r\n        limit,\r\n        offset\r\n      }\r\n    })\r\n    return response.data.accounts\r\n  }\r\n}\r\n\r\nexport default new WalletService()\r\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"max-w-2xl mx-auto pt-5\"},[_c('content-header',[_vm._v(_vm._s(_vm.$t(\"Blocks\")))]),_vm._v(\" \"),_c('section',{staticClass:\"page-section py-10\"},[_c('div',{staticClass:\"hidden sm:block\"},[_c('table-blocks',{attrs:{\"blocks\":_vm.blocks}})],1),_vm._v(\" \"),_c('div',{staticClass:\"sm:hidden\"},[_c('table-blocks-mobile',{attrs:{\"blocks\":_vm.blocks}})],1),_vm._v(\" \"),(_vm.blocks)?_c('paginator',{attrs:{\"start\":+this.page,\"count\":_vm.totalBlocks}}):_vm._e()],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import mod from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blocks.vue?vue&type=script&lang=js\"; export default mod; export * from \"-!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Blocks.vue?vue&type=script&lang=js\"","<template>\r\n  <div class=\"max-w-2xl mx-auto pt-5\">\r\n    <content-header>{{ $t(\"Blocks\") }}</content-header>\r\n    <section class=\"page-section py-10\">\r\n      <div class=\"hidden sm:block\">\r\n        <table-blocks :blocks=\"blocks\"></table-blocks>\r\n      </div>\r\n      <div class=\"sm:hidden\">\r\n        <table-blocks-mobile :blocks=\"blocks\"></table-blocks-mobile>\r\n      </div>\r\n      <paginator v-if=\"blocks\" :start=\"+this.page\" :count=\"totalBlocks\"></paginator>\r\n    </section>\r\n  </div>\r\n</template>\r\n\r\n<script type=\"text/ecmascript-6\">\r\nimport WalletService from '@/services/wallet'\r\nimport BlockService from '@/services/block'\r\n\r\nexport default {\r\n  data: () => ({\r\n    totalBlocks: 0,\r\n    blocks: null\r\n  }),\r\n\r\n  created() {\r\n    this.$on('paginatorChanged', page => this.changePage(page))\r\n    this.getTotalBlocks()\r\n  },\r\n\r\n  async beforeRouteEnter (to, from, next) {\r\n    try {\r\n      const wallet = await WalletService.find(to.params.address)\r\n      const blocks = await BlockService.getByPublicKey(wallet.publicKey, to.params.page)\r\n      next(vm => vm.setBlocks(blocks))\r\n    } catch(e) { next({ name: '404' }) }\r\n  },\r\n\r\n  async beforeRouteUpdate (to, from, next) {\r\n    this.blocks = null\r\n\r\n    try {\r\n      const wallet = await WalletService.find(to.params.address)\r\n      const blocks = await BlockService.getByPublicKey(wallet.publicKey, to.params.page)\r\n      this.setBlocks(blocks)\r\n      next()\r\n    } catch(e) { next({ name: '404' }) }\r\n  },\r\n\r\n  computed: {\r\n    address() {\r\n      return this.$route.params.address\r\n    },\r\n    page() {\r\n      return this.$route.params.page\r\n    },\r\n  },\r\n\r\n  methods: {\r\n    setBlocks (blocks) {\r\n      if (!blocks) return\r\n\r\n      this.blocks = blocks\r\n    },\r\n\r\n    async getTotalBlocks() {\r\n      const wallet = await WalletService.find(this.address)\r\n      const response = await BlockService.forgedByPublicKeyCount(wallet.publicKey)\r\n\r\n      this.totalBlocks = Number(response)\r\n    },\r\n\r\n    changePage(page) {\r\n      this.$router.push({\r\n        name: 'wallet-blocks',\r\n        params: { address: this.address, page }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n","import { render, staticRenderFns } from \"./Blocks.vue?vue&type=template&id=0829f189\"\nimport script from \"./Blocks.vue?vue&type=script&lang=js\"\nexport * from \"./Blocks.vue?vue&type=script&lang=js\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}